From 1f656907e1fa6c85d2728a183e98ab3a1825d1dc Mon Sep 17 00:00:00 2001
From: Brad D <social@brandongrows.me>
Date: Fri, 9 Aug 2024 00:16:50 -0500
Subject: [PATCH 12/12] QtBase qt_version_tagging fix

---
 mkspecs/common/clang.conf | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

diff --git a/mkspecs/common/clang.conf b/mkspecs/common/clang.conf
index dad15a22a8..82041fdaf9 100644
--- a/mkspecs/common/clang.conf
+++ b/mkspecs/common/clang.conf
@@ -40,10 +40,12 @@ QMAKE_CXXFLAGS_GNUCXX14          = -std=gnu++1y
 QMAKE_CXXFLAGS_GNUCXX1Z          = -std=gnu++1z
 QMAKE_CXXFLAGS_GNUCXX2A          = -std=gnu++2a
 
-QMAKE_LFLAGS_CXX11      =
-QMAKE_LFLAGS_CXX14      =
-QMAKE_LFLAGS_CXX1Z      =
-QMAKE_LFLAGS_LTCG       = $$QMAKE_CFLAGS_LTCG
+QMAKE_LFLAGS_CXX11      = -Wl,--no-undefined
+QMAKE_LFLAGS_CXX14      = $$QMAKE_LFLAGS_CXX11
+QMAKE_LFLAGS_CXX1Z      = $$QMAKE_LFLAGS_CXX11
+QMAKE_LFLAGS_LTCG       = $$QMAKE_CFLAGS_LTCG $$QMAKE_LFLAGS_CXX11
+
+QMAKE_DEFINES          += -DQT_NO_VERSION_TAGGING
 
 # Wrapper tools that understand .o/.a files with LLVM bytecode instead of machine code
 QMAKE_AR_LTCG           = llvm-ar cqs
-- 
2.46.0

